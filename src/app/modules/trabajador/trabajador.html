<div class="container mt-4">
  <div class="header-section">
    <h2>Panel de GestiÃ³n: Trabajador</h2>
    <p class="text-muted">Explora el catÃ¡logo y gestiona tus tutoriales</p>
  </div>

  <ul class="nav nav-tabs mb-4">
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'catalogo'" (click)="activeTab = 'catalogo'">
        ğŸŒ CatÃ¡logo de Tareas
      </button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'mis-solicitudes'" (click)="activeTab = 'mis-solicitudes'">
        ğŸ“‘ Mis Postulaciones
      </button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'tutoriales'" (click)="activeTab = 'tutoriales'">
        ğŸ“š Mis Tutoriales
      </button>
    </li>
  </ul>

  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

  <div *ngIf="isLoading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <div [ngSwitch]="activeTab" *ngIf="!isLoading">

    <div *ngSwitchCase="'catalogo'">
      <div class="row">
        <div class="col-12" *ngFor="let c of clientesConTareas">
          <div *ngFor="let t of c.tareas">
            <div class="card mb-3 shadow-sm border-start border-primary border-4">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="card-title mb-1">{{ t.contenido }}</h5>
                    <p class="card-text mb-0 text-muted">Presupuesto: {{ t.precioBase }}â‚¬ | Tiempo: {{ t.tiempoEstimado }}h</p>
                  <small class="text-primary">Publicado por: {{ c.nombre }} {{ c.apellido }}</small>
                </div>
                <button class="btn btn-success" (click)="enviarSolicitud(t.id!)">
                  Postularme
                </button>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="clientesConTareas.length === 0" class="text-center p-5">
          <p class="text-muted">No hay tareas disponibles en el catÃ¡logo en este momento.</p>
        </div>
      </div>
    </div>

    <div *ngSwitchCase="'mis-solicitudes'">
      <p class="text-muted">Funcionalidad pendiente de implementaciÃ³n en el servidor.</p>
    </div>

    <div *ngSwitchCase="'tutoriales'">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Mis Tutoriales</h4>
        <button class="btn btn-primary btn-sm">+ Crear Tutorial</button>
      </div>
      <p class="text-muted small">Listado de tus guÃ­as de reparaciÃ³n publicadas.</p>
    </div>

  </div>
</div>