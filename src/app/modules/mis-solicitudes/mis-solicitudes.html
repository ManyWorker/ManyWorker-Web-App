<div class="container mt-5 mb-5">
  
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">
      <i class="bi bi-briefcase-fill me-2"></i>Tareas Disponibles
    </h2>
    <p class="text-muted">Explora las tareas publicadas por los clientes y envía tu solicitud.</p>
  </div>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <div *ngIf="!loading && tareasDisponibles.length === 0" class="alert alert-info text-center">
    No hay tareas disponibles en este momento. ¡Vuelve más tarde!
  </div>

  <div class="row" *ngIf="!loading && tareasDisponibles.length > 0">
    <div class="col-md-6 col-lg-4 mb-4" *ngFor="let tarea of tareasDisponibles">
      
      <div class="card h-100 shadow-sm border-0 hover-card">
        <div class="card-header bg-white border-bottom-0 pt-3">
          <div class="d-flex justify-content-between align-items-center">
            <span class="badge bg-secondary rounded-pill">
              {{ tarea.categoria?.titulo || 'General' }}
            </span>
            <small class="text-muted">{{ tarea.fechaPublicacion | date:'dd/MM/yyyy' }}</small>
          </div>
        </div>

        <div class="card-body">
          <h5 class="card-title fw-bold text-dark">{{ tarea.descripcion | slice:0:50 }}...</h5>
          <p class="card-text text-muted small">
            {{ tarea.descripcion }}
          </p>
          
          <hr class="my-3 text-muted opacity-25">

          <div class="d-flex flex-column gap-2">
            <div class="d-flex align-items-center text-secondary">
              <i class="bi bi-geo-alt-fill me-2 text-danger"></i>
              <span>{{ tarea.direccion }}</span>
            </div>
            
            <div class="d-flex align-items-center text-secondary">
              <i class="bi bi-cash-stack me-2 text-success"></i>
              <span>Presupuesto Max: <strong>{{ tarea.precioMax }}€</strong></span>
            </div>

            <div class="d-flex align-items-center text-secondary">
              <i class="bi bi-calendar-event me-2 text-primary"></i>
              <span>Fin: {{ tarea.fechaFin | date:'dd/MM/yyyy' }}</span>
            </div>
          </div>
        </div>

        <div class="card-footer bg-white border-top-0 pb-3">
          <button 
            class="btn btn-primary w-100 fw-bold" 
            (click)="aplicarTarea(tarea)">
            <i class="bi bi-send-check me-1"></i> Enviar Solicitud
          </button>
        </div>
      </div>

    </div>
  </div>
</div>